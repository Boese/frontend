{
  "name": "good-reporter",
  "version": "2.0.0",
  "repository": {
    "type": "git",
    "url": "git://github.com/hapijs/good-reporter"
  },
  "description": "Good reporter interface",
  "main": "index.js",
  "scripts": {
    "test": "make test-cov"
  },
  "dependencies": {
    "hoek": "2.x.x"
  },
  "devDependencies": {
    "lab": "4.x.x"
  },
  "engines": {
    "node": ">=0.10.x"
  },
  "licenses": [
    {
      "type": "BSD",
      "url": "http://github.com/hapijs/good-reporter/raw/master/LICENSE"
    }
  ],
  "readme": "# good-reporter\n\nBasic interface for [good](https://github.com/hapijs/good) reporter plugins.\n\n![Build Status](https://travis-ci.org/hapijs/good-reporter.svg?branch=master) ![Current Version](https://img.shields.io/npm/v/good-reporter.svg)\n\nLead Maintainer: [Adam Bretz](https://github.com/arb)\n\n## Usage\n\nThis is an abstraction module for implementing reporters for the [good](https://github.com/hapijs/good) process monitor plugin. It is generally used as a base object and varioues methods are over written for different reporters.\n\n## Good Reporter\n### new GoodReporter ([options])\n\ncreates a new GoodReporter object with the following arguments\n- `[options]` - optional arguments object\n\t- `[events]` - an object of key value paris. Defaults to `{ request: \"*\", log: \"*\" }` meaning `request` and `log` events with no tag filtering.\n\t\t- `key` - one of (\"request\", \"log\", \"error\", or \"ops\") indicating the hapi event to subscribe to\n\t\t- `value` - an array of tags to filter incoming events. \"*\" indicates no filtering.\n\n### `GoodReporter` methods\n- `start(eventemitter, callback)` - starts the reporter and registers for the correct events emitted by the supplied event emitter. Any \"run once\" logic should be in the start method. For example, creating a database connection.\n- `stop()` - stops the reporter. Should be used for any tear down logic such as clearing time outs or disconnecting from a database.\n- `_report(event, eventData)` - _private_ method that implementations of `GoodReporter` *must* implement. You should never call this method directly. It will be called when the proper event has been emitted from the supplied event emitter.\n- `_filter(event, eventData)` - _private_ method for filtering incoming events. Looks into `options.events` for a match on `event` and then further filters by the tags compared to `eventData.tags`. Returns `true` if the `event` + `[eventData.tags]` should be reporter. You should never need to call `_filter` directly.\n- `_handleEvent(event, eventData)` - _private_ method used to handle events from the event emitter. If `_filter` returns `true`, the `_report` method is called.\n- `_register` - _private_ method used to set up event handlers for events this reporter cares about.\n\n## Examples\n\nEvery new reporter *must* implement a `report()` method. This is where the logic of exactly how this reporter moves data from the received events to the destination. Everything else can be optional depending on the specific transmission method of `report`.\n\n### \"One Off\" object\n\nBelow is a simple \"one off\" good-reporter object.\n\n```javascript\nvar GoodReporter = require('good-reporter');\nvar EventEmitter = require('events').EventEmitter;\n\nvar reporter = new GoodReporter();\nvar ee = new EventEmitter();\nreporter.report = function (event, eventData) {\n\n    if (event === 'request') {\n        console.info(eventData.method);\n    } else if (event === 'ops') {\n        console.info(JSON.parse(eventData));\n    }\n};\nreporter.start(ee, function (err) {\n\n    ee.emit('request', 'request', { method: 'post' } );\n});\n}\n```\n\n### Reusable Reporter\n\nIf you are looking to create a custom and reusable reporter for [good](https://github.com/hapijs/good), your new object needs to inherit from `good-reporter`. You will also need to implement `report(event, eventData)` as well.\n\n```javascript\nvar GoodReporter = require('good-reporter');\nvar Util = require('util');\n\nvar internals = {};\n\nmodule.exports = internals.GoodTwitter = function (options) {\n\n\tGoodReporter.call(this, options);\n\n\tthis._hashTag = \"#goodlogs\";\n\tthis._account = \"hapijs\";\n};\n\nHoek.inherits(internals.GoodFile, GoodTwitter);\n\ninternals.GoodTwitter.prototype.start = function (emitter, callback) {\n\n    this._register(emitter, this._events);\n    // Open a socket to the Twitter API\n    Tweet.open('https://twitter.com/hapijs', function (err, result) {\n\n        this._connection = result;\n        return callback(err);\n    });\n};\n\ninternals.GoodTwitter.prototype.stop = function () {\n\n\t// Send a final Tweet for the day, then close the open connection\n\tthis._connection.send(this._hashTag + ' signing off for the day.', function (err) {\n\n\t    this._connection.close();\n\t});\n};\n\n\ninternals.GoodTwitter.prototype.report = function (event, eventData) {\n\n\tthis._connection.send(JSON.parse(eventData) + ' ' + this._hashTag);\n};\n```\n\nIn this example, you need to call the `GoodReporter` constructor to set up the internal state. Afterward you can write any custom logic that your specific broadcaster needs.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/hapijs/good-reporter/issues"
  },
  "_id": "good-reporter@2.0.0",
  "_from": "good-reporter@2.x.x"
}
